{"version":3,"sources":["webpack:///./src/views/Modifica.vue?0c33","webpack:///src/views/Modifica.vue","webpack:///./src/views/Modifica.vue?fc75","webpack:///./src/views/Modifica.vue","webpack:///./src/components/inputUser/InputSelect.vue?1cd0","webpack:///src/components/inputUser/InputSelect.vue","webpack:///./src/components/inputUser/InputSelect.vue?1395","webpack:///./src/components/inputUser/InputSelect.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","_s","title","staticClass","attrs","usernames","username","touch","on","setUsername","_e","user","setName","setEmail","role","setLogo","submitting","edited","handleSubmit","class","handleReset","staticRenderFns","components","InputNomeCognome","InputEmail","InputLogo","InputSelect","LoadingButton","data","userDB","invalidName","invalidEmail","invalidUsername","mounted","updatePage","watch","UserHelper","methods","url","endsWith","router","invalid","nomeCognome","name","email","logo","Object","assign","computed","propName","component","label","errorMsg","state","options","$event","$emit","selected","$v","$invalid","model","value","callback","$$v","expression","props","validations","$error","required","$dirty","created","$props","defaultOption","t","$touch","$reset"],"mappings":"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","file":"js/chunk-74fd9990.49b6f00b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',[_c('h1',[_vm._v(_vm._s(_vm.title))]),_c('b-form',{staticClass:\"centered-form\"},[(_vm.usernames)?_c('InputSelect',{attrs:{\"options\":_vm.usernames,\"defaultOption\":_vm.username,\"touch\":_vm.touch,\"label\":\"Username\"},on:{\"setOption\":_vm.setUsername}}):_vm._e(),_c('InputNomeCognome',{attrs:{\"user\":_vm.user,\"touch\":_vm.touch},on:{\"setName\":_vm.setName}}),_c('InputEmail',{attrs:{\"user\":_vm.user,\"touch\":_vm.touch},on:{\"setEmail\":_vm.setEmail}}),(_vm.role === 'uploader')?_c('InputLogo',{attrs:{\"user\":_vm.user,\"touch\":_vm.touch},on:{\"setLogo\":_vm.setLogo}}):_vm._e(),_c('b-form-group',{staticClass:\"form-buttons\"},[_c('LoadingButton',{attrs:{\"text\":\"Conferma la modifica\",\"c\":\"spaced-buttons\",\"submitting\":_vm.submitting,\"disabled\":!_vm.edited},on:{\"submit\":_vm.handleSubmit}}),_c('b-button',{class:_vm.edited ? 'no-hover spaced-buttons' : 'spaced-buttons',attrs:{\"variant\":\"outline-primary\",\"disabled\":!_vm.edited},on:{\"click\":_vm.handleReset}},[_vm._v(\"Reset\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <main>\n    <h1>{{ title }}</h1>\n    <b-form class=\"centered-form\">\n      <InputSelect\n        v-if=\"usernames\"\n        :options=\"usernames\"\n        :defaultOption=\"username\"\n        :touch=\"touch\"\n        label=\"Username\"\n        @setOption=\"setUsername\"\n      />\n      <InputNomeCognome\n        v-bind:user=\"user\"\n        v-bind:touch=\"touch\"\n        @setName=\"setName\"\n      />\n      <InputEmail\n        v-bind:user=\"user\"\n        v-bind:touch=\"touch\"\n        @setEmail=\"setEmail\"\n      />\n      <InputLogo\n        v-if=\"role === 'uploader'\"\n        v-bind:user=\"user\"\n        v-bind:touch=\"touch\"\n        @setLogo=\"setLogo\"\n      />\n      <b-form-group class=\"form-buttons\">\n        <LoadingButton\n          text=\"Conferma la modifica\"\n          c=\"spaced-buttons\"\n          :submitting=\"submitting\"\n          :disabled=\"!edited\"\n          @submit=\"handleSubmit\"\n        />\n        <b-button\n          :class=\"edited ? 'no-hover spaced-buttons' : 'spaced-buttons'\"\n          variant=\"outline-primary\"\n          :disabled=\"!edited\"\n          @click=\"handleReset\"\n          >Reset</b-button\n        >\n      </b-form-group>\n    </b-form>\n  </main>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nimport { UserHelper } from \"../helpers/UserHelper\";\nimport InputNomeCognome from \"../components/inputUser/InputNomeCognome\";\nimport InputEmail from \"../components/inputUser/InputEmail\";\nimport InputLogo from \"../components/inputUser/InputLogo\";\nimport InputSelect from \"../components/inputUser/InputSelect\";\nimport router from \"../router\";\nimport LoadingButton from \"../components/LoadingButton\";\n\nexport default {\n  components: {\n    InputNomeCognome,\n    InputEmail,\n    InputLogo,\n    InputSelect,\n    LoadingButton\n  },\n  data() {\n    return {\n      userDB: {},\n      user: {},\n      touch: false,\n      title: \"\",\n      username: \"\",\n      role: \"\",\n      usernames: null,\n      submitting: false,\n      invalidName: false,\n      invalidEmail: false,\n      invalidUsername: true\n    };\n  },\n  mounted: function() {\n    this.updatePage();\n  },\n  watch: {\n    username: function() {\n      if (this.username) {\n        UserHelper.getUser(this.username)\n          .then(res => {\n            if (this.role === \"uploader\" && !res.data.logo) {\n              res.data.logo = \"\";\n            }\n            this.userDB = res.data;\n            this.user = Object.assign({}, this.userDB);\n          })\n          .catch(() => {\n            this.error(\"Impossibile proseguire sulla pagina richiesta\");\n            router.push(`/${UserHelper.getLoggedUser().role}/`);\n          });\n      }\n    },\n    \"$route.path\": function() {\n      this.updatePage();\n    }\n  },\n  methods: {\n    ...mapActions(\"alert\", [\"success\", \"error\"]),\n    updatePage() {\n      let url = this.$route.path;\n      if (url.endsWith(\"modificaProfilo\")) {\n        this.title = \"Modifica profilo\";\n        this.setUsername(UserHelper.getLoggedUser().username);\n        this.role = UserHelper.getLoggedUser().role;\n        this.usernames = null;\n      } else {\n        if (url.endsWith(\"modificaConsumer\")) {\n          this.title = \"Modifica Consumer\";\n          this.role = \"consumer\";\n        } else if (url.endsWith(\"modificaUploader\")) {\n          this.title = \"Modifica Uploader\";\n          this.role = \"uploader\";\n        } else if (url.endsWith(\"modificaAmministratore\")) {\n          this.title = \"Modifica Amministratore\";\n          this.role = \"administrator\";\n        } else {\n          router.push(`/${UserHelper.getLoggedUser().role}/`);\n        }\n        //recupero gli usernames\n        UserHelper.getUsernames(this.role)\n          .then(res => {\n            this.usernames = res.data;\n            if (this.$route.params && this.$route.params.username)\n              this.setUsername(this.$route.params.username);\n          })\n          .catch(() => {\n            this.error(\"Impossibile proseguire sulla pagina richiesta\");\n            router.push(`/${UserHelper.getLoggedUser().role}/`);\n          });\n      }\n    },\n    setUsername(username, invalid = false) {\n      this.username = username;\n      this.invalidUsername = invalid;\n    },\n    setName(name, invalid) {\n      this.user.nomeCognome = name;\n      this.invalidName = invalid;\n    },\n    setEmail(email, invalid) {\n      this.user.email = email;\n      this.invalidEmail = invalid;\n    },\n    setLogo(logo) {\n      this.user.logo = logo;\n    },\n    handleSubmit() {\n      this.touch = true;\n      if (\n        this.edited &&\n        !(this.invalidName || this.invalidEmail || this.invalidUsername)\n      ) {\n        this.submitting = true;\n        UserHelper.editUser(this.user)\n          .then(() => {\n            this.success(\"Modifica conclusa con successo.\");\n            this.submitting = false;\n            router.push(`/${UserHelper.getLoggedUser().role}/`);\n          })\n          .catch(() => {\n            this.error(\"Modifica dati fallita\");\n            this.submitting = false;\n          });\n      }\n    },\n    handleReset() {\n      this.user = Object.assign({}, this.userDB);\n    }\n  },\n  computed: {\n    edited: function() {\n      for (let propName in this.user) {\n        if (this.user[propName] !== this.userDB[propName]) return true;\n      }\n      return false;\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Modifica.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Modifica.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Modifica.vue?vue&type=template&id=4da9b70f&\"\nimport script from \"./Modifica.vue?vue&type=script&lang=js&\"\nexport * from \"./Modifica.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form-group',{attrs:{\"label\":_vm.label,\"label-align\":\"left\",\"invalid-feedback\":_vm.errorMsg,\"state\":_vm.state}},[_c('b-form-select',{attrs:{\"options\":_vm.options,\"state\":_vm.state},on:{\"input\":function($event){return _vm.$emit('setOption', _vm.selected, _vm.$v.selected.$invalid)}},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <b-form-group\r\n    :label=\"label\"\r\n    label-align=\"left\"\r\n    :invalid-feedback=\"errorMsg\"\r\n    :state=\"state\"\r\n  >\r\n    <b-form-select\r\n      v-model=\"selected\"\r\n      :options=\"options\"\r\n      :state=\"state\"\r\n      @input=\"$emit('setOption', selected, $v.selected.$invalid)\"\r\n    ></b-form-select>\r\n  </b-form-group>\r\n</template>\r\n\r\n<script>\r\nimport { required } from \"vuelidate/lib/validators\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      selected: \"\",\r\n    };\r\n  },\r\n  props: [\"touch\", \"label\", \"options\", \"defaultOption\"],\r\n  validations: {\r\n    selected: { required },\r\n  },\r\n  computed: {\r\n    errorMsg: function() {\r\n      if (this.$v.selected.$error && !this.$v.selected.required) {\r\n        return \"Campo obbligatorio\";\r\n      } else return null;\r\n    },\r\n    state: function() {\r\n      if (this.$v.selected.$dirty && this.$v.selected.$invalid) {\r\n        return false;\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n  },\r\n  created: function() {\r\n    if (this.$props.defaultOption) {\r\n      this.selected = this.defaultOption;\r\n    }\r\n  },\r\n  watch: {\r\n    \"$props.touch\": function(t) {\r\n      if (t) {\r\n        this.$v.selected.$touch();\r\n      } else {\r\n        this.$v.selected.$reset();\r\n      }\r\n    },\r\n    \"$props.defaultOption\": function() {\r\n      this.selected = this.$props.defaultOption\r\n        ? this.$props.defaultOption\r\n        : \"\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputSelect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputSelect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InputSelect.vue?vue&type=template&id=68af8c22&\"\nimport script from \"./InputSelect.vue?vue&type=script&lang=js&\"\nexport * from \"./InputSelect.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
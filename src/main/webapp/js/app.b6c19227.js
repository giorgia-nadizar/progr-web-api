(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,d=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);m&&m(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-123b87ac":"e9098eab","chunk-1ce53b51":"182a6bd4","chunk-60452264":"e78ccf4b","chunk-84283dd8":"ebb50865","chunk-159a2566":"f39804e8","chunk-31ce20ec":"548a460f","chunk-43b0a45e":"10a433c7","chunk-4f25f185":"36e21cae","chunk-55db5318":"430d24d1","chunk-237e9de6":"dfaae89d","chunk-74fd9990":"49b6f00b","chunk-706f07dc":"46f24b93","chunk-7e0559d8":"fb429866"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-84283dd8":1,"chunk-31ce20ec":1,"chunk-55db5318":1,"chunk-7e0559d8":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-123b87ac":"31d6cfe0","chunk-1ce53b51":"31d6cfe0","chunk-60452264":"31d6cfe0","chunk-84283dd8":"72e5ca1d","chunk-159a2566":"31d6cfe0","chunk-31ce20ec":"3c3adb18","chunk-43b0a45e":"31d6cfe0","chunk-4f25f185":"31d6cfe0","chunk-55db5318":"30791fbf","chunk-237e9de6":"31d6cfe0","chunk-74fd9990":"31d6cfe0","chunk-706f07dc":"31d6cfe0","chunk-7e0559d8":"2bec6705"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],m.parentNode.removeChild(m),n(i)},m.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(m);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var m=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var m=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},2100:function(e,t,n){},"325d":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("99af"),n("96cf");var r=n("1da1"),a=n("bc3a"),o=n.n(a),i={isUnique:c,createUser:u,login:l,logout:d,getLoggedUser:m,editUser:p,getUser:f,deleteUser:h,getUsernames:g,changePassword:k,getUsers:b,passwordRecovery:v};function c(e){return s.apply(this,arguments)}function s(){return s=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=!0,!t||!t.length){e.next=12;break}return e.prev=2,e.next=5,o.a.get("".concat("/api","/user/isUnique/").concat(encodeURIComponent(t)));case 5:return r=e.sent,n=r.data,e.abrupt("return",n);case 10:e.prev=10,e.t0=e["catch"](2);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),s.apply(this,arguments)}function u(e){return o.a.put("".concat("/api","/user"),e)}function l(e,t){return o.a.get("".concat("/api","/user/login/").concat(e,"/").concat(t)).then((function(e){return e&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}function d(){localStorage.removeItem("user")}function m(){return JSON.parse(localStorage.getItem("user"))}function p(e){return o.a.patch("".concat("/api","/user"),e)}function f(e){return o.a.get("".concat("/api","/user/").concat(encodeURIComponent(e)))}function h(e){return o.a.delete("".concat("/api","/user/").concat(encodeURIComponent(e)))}function b(e){return o.a.get("".concat("/api","/user/getUsers/").concat(e))}function g(e){return o.a.get("".concat("/api","/user/getUsernames/").concat(e))}function k(e){return o.a.patch("".concat("/api","/user/changePassword"),e)}function v(e){return o.a.get("".concat("/api","/user/passwordRecovery/").concat(e))}},"56d7":function(e,t,n){"use strict";n.r(t);n("99af"),n("d3b7"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"},on:{click:e.closeOpenDropdown}},[e.account.user?n("Navbar",{ref:"navbar"}):e._e(),n("Alert"),n("router-view",{staticClass:"main-view",on:{click:e.closeOpenDropdown}})],1)},o=[],i=n("5530"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"header"},[n("nav",{staticClass:"header__navbar"},[n("transition",{attrs:{name:"slide-fade"}},[n("a",{staticClass:"header__link",attrs:{href:"#"}},[e.show?n("button",{key:"on",staticClass:"header--button"},[n("b-icon",{staticClass:"header--icon",attrs:{icon:"x"}})],1):n("button",{key:"off",staticClass:"header--button",on:{click:function(t){t.stopPropagation(),e.show=!0}}},[n("b-icon",{staticClass:"header--icon",attrs:{icon:"justify"}})],1)])]),n("transition",{attrs:{name:"dropdown"}},[e.show?n("ul",{staticClass:"dropdown__menu",class:{active:e.show}},[e._l(e.navlist,(function(t){return n("li",{key:t.id,staticClass:"dropdown__menu-item"},[t.children?[n("a",{staticClass:"dropdown__menu-link",attrs:{title:t.title,href:"#"},on:{click:function(n){n.stopPropagation(),t.isOpen=!t.isOpen,e.closeOpenDropdown(t.id)}}},[n("b-icon",{staticClass:"dropdown__menu-icon",attrs:{icon:t.icon}}),e._v(" "+e._s(t.title)+" ")],1),n("ul",{staticClass:"dropdown",class:{isOpen:t.isOpen}},e._l(t.children,(function(t){var r=t.url,a=t.name,o=t.index;return n("li",{key:o},[n("router-link",{staticClass:"inner-dropdown__menu-link",attrs:{to:r}},[e._v(" "+e._s(a)+" ")])],1)})),0)]:[n("router-link",{staticClass:"dropdown__menu-link",attrs:{to:t.url,title:t.title}},[n("b-icon",{staticClass:"dropdown__menu-icon",attrs:{icon:t.icon}}),e._v(" "+e._s(t.title)+" ")],1)]],2)})),n("li",{staticClass:"dropdown__menu-item",on:{click:e.logout}},[n("a",{staticClass:"dropdown__menu-link",attrs:{href:"#",title:"Logout"}},[n("b-icon",{staticClass:"dropdown__menu-icon",attrs:{icon:"power"}}),e._v(" Logout ")],1)])],2):e._e()])],1)])},s=[],u=(n("4160"),n("159b"),n("2f62")),l={name:"Navbar",data:function(){return{show:!1,gestioneProfilo:{children:[{name:"Modifica Profilo",url:"/modificaProfilo"},{name:"Cambia Password",url:"/cambiaPassword"}],icon:"person-square",id:0,title:"Gestione Profilo",isOpen:!1},statisticheUploaders:{icon:"graph-up",id:1,title:"Statistiche Uploaders",url:"/administrator/statisticheUploaders"},gestioneAmministratori:{children:[{name:"Tutti gli Amministratori",url:"/administrator/listaAmministratori"},{name:"Crea Amministratore",url:"/administrator/creaAmministratore"},{name:"Modifica Dati Amministratore",url:"/administrator/modificaAmministratore"}],icon:"person-check-fill",id:2,title:"Gestione Amministratori",isOpen:!1},gestioneUploaders:{children:[{name:"Tutti gli Uploaders",url:"/administrator/listaUploaders"},{name:"Crea Uploader",url:"/administrator/creaUploader"},{name:"Modifica Dati Uploader",url:"/administrator/modificaUploader"}],icon:"person-lines-fill",id:3,title:"Gestione Uploaders",isOpen:!1},fileConsumers:{icon:"file-text",id:1,title:"I miei Files",url:"/consumer/files"},fileUpload:{icon:"upload",id:1,title:"Carica File",url:"/uploader/caricaFile"},gestioneConsumers:{children:[{name:"Tutti i Consumers",url:"/uploader/home"},{name:"Crea Consumer",url:"/uploader/creaConsumer"},{name:"Modifica Dati Consumer",url:"/uploader/modificaConsumer"}],icon:"people",id:2,title:"Gestione Consumers",isOpen:!1}}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])("account",["logout"])),{},{closeOpenDropdown:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;-1===e&&(this.show=!1),this.navlist.forEach((function(t){t.children&&t.id!==e&&(t.isOpen=!1)}))}}),computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])({account:function(e){return e.account}})),{},{navlist:function(){var e=[];return this.account.user&&(e.push(this.gestioneProfilo),"administrator"===this.account.user.role?(e.push(this.statisticheUploaders),e.push(this.gestioneAmministratori),e.push(this.gestioneUploaders)):"uploader"===this.account.user.role?(e.push(this.fileUpload),e.push(this.gestioneConsumers)):"consumer"===this.account.user.role&&e.push(this.fileConsumers)),e}})},d=l,m=(n("e6670"),n("2877")),p=Object(m["a"])(d,c,s,!1,null,null,null),f=p.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-alert",{attrs:{show:e.dismissCountDown,dismissible:"",fade:"",variant:e.alert.type},on:{dismissed:e.clearAlert,"dismiss-count-down":e.countDownChanged}},[e._v(" "+e._s(e.alert.message)+" ")])},b=[],g={data:function(){return{dismissSecs:4,dismissCountDown:0}},computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])({alert:function(e){return e.alert}})),{},{hasMessage:function(){return!!this.alert.message}}),methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])({clearAlert:"alert/clear"})),{},{countDownChanged:function(e){this.dismissCountDown=e}}),watch:{"alert.message":function(e){this.dismissCountDown=e?this.dismissSecs:0}}},k=g,v=Object(m["a"])(k,h,b,!1,null,null,null),w=v.exports,C={name:"app",components:{Navbar:f,Alert:w},computed:Object(i["a"])({},Object(u["c"])({account:function(e){return e.account}})),methods:{closeOpenDropdown:function(){this.account.user&&this.$refs.navbar.closeOpenDropdown()}}},_=C,O=(n("034f"),Object(m["a"])(_,a,o,!1,null,null,null)),y=O.exports,U=n("a18c"),P={type:null,message:null},j={success:function(e,t){var n=e.commit;n("success",t)},error:function(e,t){var n=e.commit;n("error",t)},clear:function(e){var t=e.commit;t("clear")}},A={success:function(e,t){e.type="success",e.message=t},error:function(e,t){e.type="danger",e.message=t},clear:function(e){e.type=null,e.message=null}},S={namespaced:!0,state:P,actions:j,mutations:A},z=n("325d"),x=JSON.parse(localStorage.getItem("user")),D=x?{status:{loggedIn:!0},user:x}:{status:{},user:null},E={login:function(e,t){var n=e.dispatch,r=e.commit,a=t.username,o=t.password,i=t.returnUrl;return r("loginRequest"),z["a"].login(a,o).then((function(e){r("loginSuccess",e);var t=i||"/".concat(e.role,"/");U["a"].push(t)})).catch((function(e){r("loginFailure",e),n("alert/error",e.response.data,{root:!0})}))},logout:function(e){var t=e.commit;t("logout"),z["a"].logout(),U["a"].push("/login")}},I={loginRequest:function(e){e.status={loggingIn:!0}},loginSuccess:function(e,t){e.status={loggedIn:!0},e.user=t},loginFailure:function(e){e.status={},e.user=null,e.navlist=null},logout:function(e){e.status={},e.user=null,e.navlist=null}},M={namespaced:!0,state:D,actions:E,mutations:I};r["default"].use(u["a"]);var R=new u["a"].Store({modules:{alert:S,account:M}}),L=n("1dce"),T=n.n(L),N=n("bc3a"),F=n.n(N),q=n("5f5b"),J=n("b1e0");n("f9e3"),n("2dd8");r["default"].use(q["a"]),r["default"].use(J["a"]),r["default"].use(T.a),r["default"].use(n("2ead")),r["default"].config.productionTip=!1,F.a.interceptors.request.use((function(e){var t=z["a"].getLoggedUser();return t&&(e.headers.common["Authorization"]="Bearer ".concat(t.token)),e}),(function(e){return Promise.reject(e)})),F.a.interceptors.response.use((function(e){return e}),(function(e){if(e.response){if(console.log("Error ".concat(e.response.status," - ").concat(e.response.data)),401===e.response.status&&"Token non valido o scaduto"===e.response.data)return R.dispatch("alert/error","".concat(e.response.data,", si prega di effettuare nuovamente il login."),{root:!0}),R.dispatch("account/logout"),new Promise((function(){}))}else R.dispatch("alert/error","Impossibile connettersi. Si prega di controllare la propria connessione di rete.",{root:!0});return Promise.reject(e)})),new r["default"]({router:U["a"],store:R,axios:F.a,render:function(e){return e(y)}}).$mount("#app")},"85ec":function(e,t,n){},a18c:function(e,t,n){"use strict";n("caad"),n("b0c0"),n("d3b7"),n("2532");var r=n("2b0e"),a=n("8c4f"),o=n("325d");r["default"].use(a["a"]);var i=[{path:"/login",name:"Login",component:function(){return n.e("chunk-706f07dc").then(n.bind(null,"a55b"))}},{path:"/register",name:"Registrazione",component:function(){return Promise.all([n.e("chunk-55db5318"),n.e("chunk-237e9de6")]).then(n.bind(null,"73cf"))}},{path:"/recuperaPassword",name:"Recupera Password",component:function(){return n.e("chunk-43b0a45e").then(n.bind(null,"f695"))}},{path:"/modificaProfilo",name:"Modifica Profilo",component:function(){return Promise.all([n.e("chunk-55db5318"),n.e("chunk-74fd9990")]).then(n.bind(null,"8664"))},meta:{authorize:[]}},{path:"/cambiaPassword",name:"Cambia Password",component:function(){return n.e("chunk-159a2566").then(n.bind(null,"e4f0"))},meta:{authorize:[]}},{path:"/consumer/files",name:"Files",component:function(){return n.e("chunk-7e0559d8").then(n.bind(null,"054f"))},meta:{authorize:["consumer"]}},{path:"/consumer/file",name:"File",component:function(){return Promise.all([n.e("chunk-123b87ac"),n.e("chunk-60452264")]).then(n.bind(null,"9c88"))},meta:{authorize:["consumer"]}},{path:"/uploader/home",name:"Home Uploader",component:function(){return Promise.all([n.e("chunk-123b87ac"),n.e("chunk-1ce53b51")]).then(n.bind(null,"57b9"))},meta:{authorize:["uploader"]}},{path:"/uploader/caricaFile",name:"Carica File",component:function(){return n.e("chunk-31ce20ec").then(n.bind(null,"bf36"))},meta:{authorize:["uploader"]}},{path:"/uploader/creaConsumer",name:"Crea Consumer",component:function(){return Promise.all([n.e("chunk-55db5318"),n.e("chunk-237e9de6")]).then(n.bind(null,"73cf"))},meta:{authorize:["uploader"]}},{path:"/uploader/modificaConsumer",name:"Modifica Consumer",component:function(){return Promise.all([n.e("chunk-55db5318"),n.e("chunk-74fd9990")]).then(n.bind(null,"8664"))},meta:{authorize:["uploader"]}},{path:"/administrator/statisticheUploaders",name:"Statistiche Uploaders",component:function(){return Promise.all([n.e("chunk-123b87ac"),n.e("chunk-84283dd8")]).then(n.bind(null,"7c19"))},meta:{authorize:["administrator"]}},{path:"/administrator/creaAmministratore",name:"Crea Amministratore",component:function(){return Promise.all([n.e("chunk-55db5318"),n.e("chunk-237e9de6")]).then(n.bind(null,"73cf"))},meta:{authorize:["administrator"]}},{path:"/administrator/listaAmministratori",name:"Amministratori",component:function(){return n.e("chunk-4f25f185").then(n.bind(null,"9327"))},meta:{authorize:["administrator"]}},{path:"/administrator/modificaAmministratore",name:"Modifica Amministratore",component:function(){return Promise.all([n.e("chunk-55db5318"),n.e("chunk-74fd9990")]).then(n.bind(null,"8664"))},meta:{authorize:["administrator"]}},{path:"/administrator/creaUploader",name:"Crea Uploader",component:function(){return Promise.all([n.e("chunk-55db5318"),n.e("chunk-237e9de6")]).then(n.bind(null,"73cf"))},meta:{authorize:["administrator"]}},{path:"/administrator/listaUploaders",name:"Uploaders",component:function(){return n.e("chunk-4f25f185").then(n.bind(null,"9327"))},meta:{authorize:["administrator"]}},{path:"/administrator/modificaUploader",name:"Modifica Uploader",component:function(){return Promise.all([n.e("chunk-55db5318"),n.e("chunk-74fd9990")]).then(n.bind(null,"8664"))},meta:{authorize:["administrator"]}},{path:"/consumer*",redirect:"/consumer/files"},{path:"/uploader*",redirect:"/uploader/home"},{path:"/administrator*",redirect:"/administrator/statisticheUploaders"},{path:"*",redirect:"/login"}],c=new a["a"]({routes:i});c.beforeEach((function(e,t,n){var r=o["a"].getLoggedUser();if(("Login"===e.name||"Registrazione"===e.name||"Recupera Password"===e.name)&&r)return n({path:"/".concat(r.role,"/")});var a=e.meta.authorize;if(a){if(!r)return n({path:"/login",query:{returnUrl:e.path}});if(a.length&&!a.includes(r.role))return n({path:"/".concat(r.role,"/")})}n()})),t["a"]=c},e6670:function(e,t,n){"use strict";var r=n("2100"),a=n.n(r);a.a}});
//# sourceMappingURL=app.b6c19227.js.map
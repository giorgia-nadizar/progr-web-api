(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74fd9990"],{8664:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",[s("h1",[e._v(e._s(e.title))]),s("b-form",{staticClass:"centered-form"},[e.usernames?s("InputSelect",{attrs:{options:e.usernames,defaultOption:e.username,touch:e.touch,label:"Username"},on:{setOption:e.setUsername}}):e._e(),s("InputNomeCognome",{attrs:{user:e.user,touch:e.touch},on:{setName:e.setName}}),s("InputEmail",{attrs:{user:e.user,touch:e.touch},on:{setEmail:e.setEmail}}),"uploader"===e.role?s("InputLogo",{attrs:{user:e.user,touch:e.touch},on:{setLogo:e.setLogo}}):e._e(),s("b-form-group",{staticClass:"form-buttons"},[s("LoadingButton",{attrs:{text:"Conferma la modifica",c:"spaced-buttons",submitting:e.submitting,disabled:!e.edited},on:{submit:e.handleSubmit}}),s("b-button",{class:e.edited?"no-hover spaced-buttons":"spaced-buttons",attrs:{variant:"outline-primary",disabled:!e.edited},on:{click:e.handleReset}},[e._v("Reset")])],1)],1)],1)},a=[],n=(s("8a79"),s("5530")),o=s("2f62"),r=s("325d"),u=s("0fb7"),l=s("65eb"),c=s("7a01"),d=s("b0ba"),h=s("a18c"),m=s("8e8d"),p={components:{InputNomeCognome:u["a"],InputEmail:l["a"],InputLogo:c["a"],InputSelect:d["a"],LoadingButton:m["a"]},data:function(){return{userDB:{},user:{},touch:!1,title:"",username:"",role:"",usernames:null,submitting:!1,invalidName:!1,invalidEmail:!1,invalidUsername:!0}},mounted:function(){this.updatePage()},watch:{username:function(){var e=this;this.username&&r["a"].getUser(this.username).then((function(t){"uploader"!==e.role||t.data.logo||(t.data.logo=""),e.userDB=t.data,e.user=Object.assign({},e.userDB)})).catch((function(){e.error("Impossibile proseguire sulla pagina richiesta"),h["a"].push("/".concat(r["a"].getLoggedUser().role,"/"))}))},"$route.path":function(){this.updatePage()}},methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])("alert",["success","error"])),{},{updatePage:function(){var e=this,t=this.$route.path;t.endsWith("modificaProfilo")?(this.title="Modifica profilo",this.setUsername(r["a"].getLoggedUser().username),this.role=r["a"].getLoggedUser().role,this.usernames=null):(t.endsWith("modificaConsumer")?(this.title="Modifica Consumer",this.role="consumer"):t.endsWith("modificaUploader")?(this.title="Modifica Uploader",this.role="uploader"):t.endsWith("modificaAmministratore")?(this.title="Modifica Amministratore",this.role="administrator"):h["a"].push("/".concat(r["a"].getLoggedUser().role,"/")),r["a"].getUsernames(this.role).then((function(t){e.usernames=t.data,e.$route.params&&e.$route.params.username&&e.setUsername(e.$route.params.username)})).catch((function(){e.error("Impossibile proseguire sulla pagina richiesta"),h["a"].push("/".concat(r["a"].getLoggedUser().role,"/"))})))},setUsername:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.username=e,this.invalidUsername=t},setName:function(e,t){this.user.nomeCognome=e,this.invalidName=t},setEmail:function(e,t){this.user.email=e,this.invalidEmail=t},setLogo:function(e){this.user.logo=e},handleSubmit:function(){var e=this;this.touch=!0,this.edited&&!(this.invalidName||this.invalidEmail||this.invalidUsername)&&(this.submitting=!0,r["a"].editUser(this.user).then((function(){e.success("Modifica conclusa con successo."),e.submitting=!1,h["a"].push("/".concat(r["a"].getLoggedUser().role,"/"))})).catch((function(){e.error("Modifica dati fallita"),e.submitting=!1})))},handleReset:function(){this.user=Object.assign({},this.userDB)}}),computed:{edited:function(){for(var e in this.user)if(this.user[e]!==this.userDB[e])return!0;return!1}}},f=p,g=s("2877"),b=Object(g["a"])(f,i,a,!1,null,null,null);t["default"]=b.exports},b0ba:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-form-group",{attrs:{label:e.label,"label-align":"left","invalid-feedback":e.errorMsg,state:e.state}},[s("b-form-select",{attrs:{options:e.options,state:e.state},on:{input:function(t){return e.$emit("setOption",e.selected,e.$v.selected.$invalid)}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},a=[],n=s("b5ae"),o={data:function(){return{selected:""}},props:["touch","label","options","defaultOption"],validations:{selected:{required:n["required"]}},computed:{errorMsg:function(){return this.$v.selected.$error&&!this.$v.selected.required?"Campo obbligatorio":null},state:function(){return(!this.$v.selected.$dirty||!this.$v.selected.$invalid)&&null}},created:function(){this.$props.defaultOption&&(this.selected=this.defaultOption)},watch:{"$props.touch":function(e){e?this.$v.selected.$touch():this.$v.selected.$reset()},"$props.defaultOption":function(){this.selected=this.$props.defaultOption?this.$props.defaultOption:""}}},r=o,u=s("2877"),l=Object(u["a"])(r,i,a,!1,null,null,null);t["a"]=l.exports}}]);
//# sourceMappingURL=chunk-74fd9990.49b6f00b.js.map